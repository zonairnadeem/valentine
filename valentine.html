<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine üíñ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
  box-sizing: border-box;
  font-family: Arial, sans-serif;
}

body {
  margin: 0;
  height: 100vh;
  background: #fff0f5;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.screen {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  opacity: 0;
  pointer-events: none;
}

.screen.active {
  opacity: 1;
  pointer-events: auto;
}

h1 {
  font-size: 2.2em;
  margin-bottom: 30px;
}

button {
  font-size: 1.2em;
  padding: 12px 28px;
  border-radius: 25px;
  border: none;
  cursor: pointer;
}

#enterBtn {
  background: #ff69b4;
  color: white;
}

#buttons {
  margin-top: 20px;
  position: relative;
}

#yesBtn {
  background: #4CAF50;
  color: white;
  margin-right: 40px;
}

#noBtn {
  background: #f44336;
  color: white;
  position: absolute;
}

#slideshow {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  transition: opacity 0.8s ease-in-out;
}

/* ‚ù§Ô∏è FLOATING HEARTS */
.heart {
  position: absolute;
  bottom: -30px;
  font-size: 24px;
  pointer-events: none; /* IMPORTANT: never blocks clicks */
  animation: floatUp linear forwards;
  opacity: 0.8;
}

@keyframes floatUp {
  0% {
    transform: translateY(0) scale(1);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  100% {
    transform: translateY(-120vh) scale(1.4);
    opacity: 0;
  }
}
</style>
</head>

<body>

<!-- AUDIO -->
<audio id="song1" src="audio/song1.mp3"></audio>
<audio id="song2" src="audio/song2.mp3" loop></audio>
<audio id="song3" src="audio/song3.mp3" loop></audio>

<!-- SCREEN 1 -->
<div id="screen1" class="screen active">
  <h1>A little surprise for someone special‚Ä¶ üíñ</h1>
  <button id="enterBtn">ENTER</button>
</div>

<!-- SCREEN 2 -->
<div id="screen2" class="screen">
  <h1>Will you be my Valentine? üíò</h1>
  <div id="buttons">
    <button id="yesBtn">Yes</button>
    <button id="noBtn">No</button>
  </div>
</div>

<!-- SCREEN 3 -->
<div id="screen3" class="screen">
  <div id="slideshow"></div>
</div>

<script>
const screen1 = document.getElementById("screen1");
const screen2 = document.getElementById("screen2");
const screen3 = document.getElementById("screen3");

const enterBtn = document.getElementById("enterBtn");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");

const song1 = document.getElementById("song1");
const song2 = document.getElementById("song2");
const song3 = document.getElementById("song3");

const slideshow = document.getElementById("slideshow");

// initial NO position
noBtn.style.left = "120px";
noBtn.style.top = "0px";

function show(from, to) {
  from.classList.remove("active");
  to.classList.add("active");
}

// ENTER
enterBtn.onclick = () => {
  show(screen1, screen2);
  song2.volume = 0.6;
  song2.play();
};

// NO hop
function hop() {
  song1.currentTime = 0;
  song1.play();

  const maxX = 160;
  const maxY = 80;

  const x = Math.random() * maxX;
  const y = Math.random() * maxY;

  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
}

noBtn.addEventListener("mouseenter", hop);
noBtn.addEventListener("touchstart", hop);

// YES
yesBtn.onclick = () => {
  show(screen2, screen3);
  song2.pause();
  song3.volume = 0.7;
  song3.play();
  startSlideshow();
  startHearts(); // ‚ù§Ô∏è added safely
};

// SLIDESHOW
const images = [
  "images/slide1.jpg",
  "images/slide2.jpg",
  "images/slide3.jpg",
  "images/slide4.jpg",
  "images/slide5.jpg"
];

let index = 0;

function startSlideshow() {
  slideshow.style.backgroundImage = `url(${images[index]})`;

  setInterval(() => {
    slideshow.style.opacity = 0;

    setTimeout(() => {
      index = (index + 1) % images.length;
      slideshow.style.backgroundImage = `url(${images[index]})`;
      slideshow.style.opacity = 1;
    }, 800);
  }, 3000);
}

// ‚ù§Ô∏è HEART GENERATOR
function startHearts() {
  setInterval(() => {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.textContent = "üíñ";

    heart.style.left = Math.random() * 100 + "vw";
    heart.style.fontSize = 18 + Math.random() * 22 + "px";
    heart.style.animationDuration = 6 + Math.random() * 4 + "s";

    document.body.appendChild(heart);

    setTimeout(() => {
      heart.remove();
    }, 10000);
  }, 400);
}
</script>

</body>
</html>
