<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ’–</title>

<style>
  body {
    margin: 0;
    height: 100vh;
    font-family: Arial, sans-serif;
    background: #fff0f5;
    background-size: cover;
    background-position: center;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .screen {
    display: none;
    text-align: center;
    padding: 20px;
    max-width: 90%;
  }

  .active {
    display: block;
  }

  h1 { margin-bottom: 24px; }

  button {
    padding: 12px 26px;
    font-size: 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    margin: 10px;
  }

  #enterBtn { background: #ff69b4; color: white; }
  #yesBtn   { background: #32cd32; color: white; }
  #noBtn    { background: #ff4d4d; color: white; position: absolute; }

  #slideshow {
    width: 90vw;
    max-width: 500px;
    height: 70vh;
    max-height: 500px;
    border-radius: 16px;
    object-fit: cover;
  }

  #replayBtn {
    background: #555;
    color: white;
    margin-top: 20px;
  }
</style>
</head>

<body>

<!-- PAGE 1 -->
<div id="page1" class="screen active">
  <h1>A little surprise for someone specialâ€¦ ðŸ’–</h1>
  <button id="enterBtn">ENTER</button>
</div>

<!-- PAGE 2 -->
<div id="page2" class="screen">
  <h1>Will you be my Valentine? ðŸ’•</h1>
  <button id="yesBtn">Yes</button>
  <button id="noBtn">No</button>
</div>

<!-- PAGE 3 -->
<div id="page3" class="screen">
  <img id="slideshow" src="img1.jpg">
  <br>
  <button id="replayBtn">Replay</button>
</div>

<!-- AUDIO (SEPARATED & CONTROLLED) -->
<audio id="song1" src="song1.mp3"></audio>
<audio id="song2" src="song2.mp3" loop></audio>
<audio id="song3" src="song3.mp3"></audio>

<script>
  const page1 = document.getElementById("page1");
  const page2 = document.getElementById("page2");
  const page3 = document.getElementById("page3");

  const enterBtn = document.getElementById("enterBtn");
  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const replayBtn = document.getElementById("replayBtn");

  const song1 = document.getElementById("song1");
  const song2 = document.getElementById("song2");
  const song3 = document.getElementById("song3");

  const slideshow = document.getElementById("slideshow");

  let slideIndex = 1;
  let slideTimer;

  function show(page) {
    page1.classList.remove("active");
    page2.classList.remove("active");
    page3.classList.remove("active");
    page.classList.add("active");
  }

  /* ENTER */
  enterBtn.onclick = () => {
    show(page2);
    song2.currentTime = 0;
    song2.volume = 0.6;
    song2.play().catch(()=>{});
    positionNo();
  };

  /* YES */
  yesBtn.onclick = () => {
    song2.pause();
    song1.pause();

    song3.currentTime = 0;
    song3.volume = 1;
    song3.play().catch(()=>{});

    show(page3);
    startSlideshow();
  };

  /* NO */
  function hopNo() {
    document.body.style.backgroundImage = "url('no-bg.jpeg')";

    song1.currentTime = 0;
    song1.play().catch(()=>{});

    const padding = 20;
    const maxX = window.innerWidth - noBtn.offsetWidth - padding;
    const maxY = window.innerHeight - noBtn.offsetHeight - padding;

    noBtn.style.left = Math.random() * maxX + "px";
    noBtn.style.top  = Math.random() * maxY + "px";
  }

  noBtn.addEventListener("mouseenter", hopNo);
  noBtn.addEventListener("touchstart", hopNo);

  function positionNo() {
    noBtn.style.left = "65%";
    noBtn.style.top = "60%";
  }

  /* SLIDESHOW */
  function startSlideshow() {
    clearInterval(slideTimer);
    slideIndex = 1;
    slideshow.src = `img${slideIndex}.jpeg`;

    slideTimer = setInterval(() => {
      slideIndex++;
      slideshow.src = `img${slideIndex}.jpeg`;
    }, 3000);
  }

  /* REPLAY */
  replayBtn.onclick = () => {
    clearInterval(slideTimer);
    song1.pause();
    song2.pause();
    song3.pause();
    document.body.style.backgroundImage = "";
    show(page1);
  };
</script>

</body>
</html>
